<?php
// Get the Store Manager
$objectManager = \Magento\Framework\App\ObjectManager::getInstance();
$storeManager = $objectManager->get(\Magento\Store\Model\StoreManagerInterface::class);

// Define the media base URL
$mediaUrl = $storeManager->getStore()->getBaseUrl(\Magento\Framework\UrlInterface::URL_TYPE_MEDIA);

// Define the images dynamically
$images = [
    [
        'desktop' => 'home/just-sold-best-tires-online.webp',
        'mobile'  => 'home/just-sold-best-tires-online-sm.webp',
        'alt'      => 'Best Tires Online'
    ],
    [
        'desktop' => 'home/just-sold-best-tires-online-2.webp',
        'mobile'  => 'home/just-sold-best-tires-online-2-sm.webp',
        'alt'      => 'Best Tires Online'
    ],
    [
        'desktop' => 'home/just-sold-best-tires-online-3.webp',
        'mobile'  => 'home/just-sold-best-tires-online-3-sm.webp',
        'alt'      => 'Best Tires Online'
    ]
];

// Get the current day index (1-365)
$currentDay = date('z'); // 'z' gives the day of the year (0 to 365)

// Map the day index to an image index
$imageIndex = $currentDay % count($images); // This will cycle through 3 images

// Get the selected image for the current day
$selectedImage = $images[$imageIndex];

// Get the full media URL for desktop and mobile images
$desktopImageUrl = $mediaUrl . $selectedImage['desktop'];
$mobileImageUrl = $mediaUrl . $selectedImage['mobile'];
?>
<div class="just-sold">
    <a href="/car-tyres.html">
        <picture>
            <!-- Desktop Image -->
            <source srcset="<?= $desktopImageUrl ?>" media="(min-width: 770px)">
            <!-- Mobile Image -->
            <img src="<?= $mobileImageUrl ?>" alt="<?= $selectedImage['alt'] ?>">
        </picture>
    </a>
</div>
